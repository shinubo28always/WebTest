<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ¬ Anime Stream VIP</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

* { box-sizing: border-box; margin:0; padding:0; }
body {
  font-family: 'Roboto', sans-serif;
  background: linear-gradient(to right, #2c5364, #203a43, #0f2027);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
  color: white;
  margin: 0;
  padding: 0;
  text-align: center;
  min-height: 100vh;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ðŸ”¹ Combined Glass Frame */
.video-box {
  width:100%;
  max-width:900px;
  margin: 1px auto;
  background: rgba(20, 20, 40, 0.4);
  backdrop-filter: blur(10px);
  border-radius:16px;
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  padding:10px;
  text-align:left;
}

/* Header inside the box */
.video-box h3 {
  font-size:1.6rem;
  color:#cca300;
  font-weight:bold;
  text-shadow: 1px 1px 6px #000;
  margin-bottom:10px;
}

/* Info tags */
.video-box span {
  display:inline-block;
  margin-right:12px;
  margin-bottom:15px;
  background: rgba(30, 30, 60, 0.6);
  padding:6px 14px;
  border-radius:10px;
  font-size:0.95rem;
  color:#fff;
  box-shadow: inset 0 0 5px rgba(255,255,255,0.1);
}

/* Video inside the same box */
.video-box video {
  width:100%;
  height:auto;
  display:block;
  background:black;
  border-radius:12px;
  transition: none; /* remove hover animation */
  box-shadow: 0 12px 30px rgba(0,0,0,0.9); /* permanent shadow */
}

/* Remove hover effect completely */
.video-box video:hover {
  transform: none;
  box-shadow: 0 12px 30px rgba(0,0,0,0.9);
}

footer {
  text-align:center;
  font-size:0.9rem;
  color:#aaa;
  margin-top:20px;
}

@media (max-width:768px){
  .video-box h3 { font-size:1.3rem; }
}
</style>
</head>
<body>

<div class="video-box">
  <h3>Streaming File Details</h3>
  <span id="videoDuration">Duration: --</span>
  <span id="videoResolution">Resolution: --</span>
  <video id="player" controls preload="metadata"></video>
</div>

<footer>Â© 2025 Anime VIP Stream</footer>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const urlParams = new URLSearchParams(window.location.search);
const rawData = urlParams.get('VToken');

const player = document.getElementById('player');
const durationElem = document.getElementById('videoDuration');
const resolutionElem = document.getElementById('videoResolution');
const titleElem = document.querySelector('.video-box h3');

if(rawData){
  // Split using '~' separator
  const parts = rawData.split('~');
  const videoLink = parts[0] || null;
  const videoTitle = parts[1] ? parts[1].replace(/\+/g,' ') : "N/A";
  const resolution = parts[2] || "N/A";

  // Set title & resolution
  titleElem.textContent = videoTitle;
  resolutionElem.textContent = "Resolution: " + resolution;

  if(videoLink){
    // Load video
    if(Hls.isSupported() && videoLink.endsWith(".m3u8")){
      const hls = new Hls();
      hls.loadSource(videoLink);
      hls.attachMedia(player);
      hls.on(Hls.Events.MANIFEST_PARSED, () => { player.play(); });
    } else {
      player.src = videoLink;
    }

    // Update duration once metadata loaded
    player.addEventListener('loadedmetadata', () => {
      const sec = Math.floor(player.duration);
      const min = Math.floor(sec / 60);
      const remainingSec = sec % 60;
      durationElem.textContent = `Duration: ${min}:${remainingSec.toString().padStart(2,'0')}`;
    });

  } else {
    titleElem.textContent = "N/A";
    resolutionElem.textContent = "Resolution: N/A";
    durationElem.textContent = "Duration: N/A";
  }

} else{
  document.body.innerHTML = "<h3 style='color:white;text-align:center;'>No video link found!</h3>";
}
</script>

</body>
</html>
